# Руководство по развертыванию контракта Aztec

## Проблема

Вы видите ошибку "Кошелек не подключен" при попытке сделать ставку, хотя кошелек подключен. Это происходит потому что:

1. **В режиме Testnet**: Контракт Aztec не скомпилирован и не развернут в сети
2. **В демо режиме**: Возможная проблема с инициализацией демо-сервиса

## Решение 1: Переключение в демо режим (рекомендуется)

**Это самый простой способ протестировать функционал:**

1. Откройте приложение в браузере
2. Отключите текущий кошелек (если подключен)
3. В селекторе сети выберите **"Sandbox (демо)"**
4. Подключите кошелек в демо режиме
5. Попробуйте сделать ставку

## Решение 2: Компиляция и развертывание контракта

### Требования

- Node.js 18+ установлен в системе
- npm или yarn
- Aztec CLI tools

### Шаги

1. **Установка Node.js** (если не установлен):
   ```bash
   # Скачайте и установите Node.js с официального сайта:
   # https://nodejs.org/
   ```

2. **Проверка установки**:
   ```bash
   node --version
   npm --version
   ```

3. **Установка зависимостей**:
   ```bash
   npm install
   ```

4. **Компиляция контракта**:
   ```bash
   npm run compile
   ```

5. **Развертывание в testnet** (требует настройки):
   ```bash
   npm run deploy:testnet
   ```

### Автоматическое исправление в коде

Код приложения уже настроен для:

- Автоматического переключения на демо режим при ошибках testnet
- Показа предупреждений пользователю
- Отключения кнопок когда контракт недоступен

## Дополнительная диагностика

### В консоли браузера проверьте:

1. **Статус сервиса**:
   ```javascript
   // В консоли разработчика
   localStorage.getItem('aztecNetwork') // должно показать 'sandbox' или 'testnet'
   ```

2. **Адрес кошелька**:
   ```javascript
   localStorage.getItem('walletAddress') // должен показать адрес кошелька
   ```

### Ошибки которые вы можете увидеть:

- `"Кошелек не подключен"` - кошелек не инициализирован в демо сервисе
- `"Контракт не подключен"` - контракт не скомпилирован в testnet режиме
- `"Сервис не инициализирован"` - проблема с инициализацией Aztec сервиса

## Рекомендации

1. **Для тестирования**: Используйте демо режим (Sandbox)
2. **Для разработки**: Скомпилируйте и разверните контракт локально
3. **Для продакшена**: Используйте полностью настроенную testnet среду

## Техническая информация

### Структура сервисов:

- `AztecService` - для работы с реальной Aztec сетью
- `AztecDemoService` - для демонстрации функционала без блокчейна
- `AztecContext` - единый контекст для управления сервисами

### Состояния системы:

1. **Sandbox + Demo Service**: Работает всегда, данные в localStorage
2. **Testnet + Aztec Service**: Требует скомпилированный контракт
3. **Hybrid Mode**: Автоматическое переключение при ошибках 